# =============================================================================
# MAESTROVERSE ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and update with your actual values
# NEVER commit the .env file to version control

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
NODE_ENV=development
PORT=3001

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
DATABASE_URL=postgresql://maestro:maestro123@postgres:5432/maestroverse

# For local development (without Docker):
# DATABASE_URL=postgresql://maestro:maestro123@localhost:5432/maestroverse

# =============================================================================
# JWT & AUTHENTICATION CONFIGURATION
# =============================================================================
# REQUIRED: Strong secret key for JWT signing (generate with: openssl rand -base64 64)
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# JWT Configuration (DO NOT CHANGE - enforced by token utilities)
# Access tokens: 15 minutes (hardcoded in src/utils/tokens.js)
# Refresh tokens: 7 days (hardcoded in src/utils/tokens.js)

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# Root admin email addresses (comma-separated, auto-promoted to ADMIN role on login)
ROOT_ADMIN_EMAILS=admin@maestro.edu

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:3005,http://localhost:3000

# Cookie configuration (automatically set based on NODE_ENV)
# - Production: secure=true (HTTPS only), sameSite=strict
# - Development: secure=false, sameSite=lax

# =============================================================================
# OAUTH2 CONFIGURATION (Google & GitHub)
# =============================================================================
# Frontend URL for OAuth redirects
FRONTEND_URL=http://localhost:3005

# Google OAuth Configuration
# Get credentials from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=http://localhost:3001/api/auth/google/callback

# GitHub OAuth Configuration
# Get credentials from: https://github.com/settings/developers
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
GITHUB_CALLBACK_URL=http://localhost:3001/api/auth/github/callback

# =============================================================================
# REDIS CONFIGURATION (Optional - for caching)
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=

# For local development (without Docker):
# REDIS_HOST=localhost

# =============================================================================
# FILE UPLOAD CONFIGURATION
# =============================================================================
# Maximum file size in bytes (default: 10MB)
MAX_FILE_SIZE=10485760

# Allowed file MIME types (comma-separated)
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf

# =============================================================================
# EMAIL CONFIGURATION (Optional - for email notifications)
# =============================================================================
# SMTP Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# Email sender details
EMAIL_FROM=Maestroverse <noreply@maestro.edu>

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================
# Rate limits are configured in src/middleware/rateLimiter.js
# Default settings:
# - Login: 5 attempts per 5 minutes
# - Register: 3 attempts per 15 minutes
# - API: 100 requests per minute
# - Exponential backoff on repeated violations

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
# Log level (error, warn, info, debug)
LOG_LEVEL=info

# =============================================================================
# SESSION CONFIGURATION (Optional - for future session-based features)
# =============================================================================
SESSION_SECRET=your-session-secret-change-this

# =============================================================================
# WEBSOCKET CONFIGURATION
# =============================================================================
# WebSocket connection requires JWT authentication
# Token must be passed in socket.handshake.auth.token

# =============================================================================
# PRODUCTION SECURITY CHECKLIST
# =============================================================================
# Before deploying to production, ensure:
# ✓ NODE_ENV=production
# ✓ Strong JWT_SECRET (64+ characters, cryptographically random)
# ✓ Strong SESSION_SECRET (64+ characters, cryptographically random)
# ✓ HTTPS enabled (automatic redirect configured in src/index.js)
# ✓ Secure database password
# ✓ CORS_ORIGINS restricted to your production domains
# ✓ ROOT_ADMIN_EMAILS configured with trusted admin emails
# ✓ Email SMTP configured for notifications
# ✓ Database backups configured
# ✓ Rate limiting tested and configured appropriately
# ✓ All .env values reviewed and updated

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================
# Docker services defined in docker-compose.yml:
# - postgres: PostgreSQL 15 on port 5432
# - redis: Redis 7 on port 6379
# - server: Express API on port 3001
# - web: Next.js frontend on port 3005 (mapped from container port 3000)

# To start all services: npm run dev
# To stop all services: npm run docker:stop
# To view logs: npm run docker:logs
